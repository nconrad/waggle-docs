<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Water Level Detection | Sage Website</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nconrad.github.io/waggle-docs/science/water-level-detection"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Water Level Detection | Sage Website"><meta data-rh="true" name="description" content="by Priyanjani Chandra"><meta data-rh="true" property="og:description" content="by Priyanjani Chandra"><link data-rh="true" rel="icon" href="/waggle-docs/img/sage-favicon.png"><link data-rh="true" rel="canonical" href="https://nconrad.github.io/waggle-docs/science/water-level-detection"><link data-rh="true" rel="alternate" href="https://nconrad.github.io/waggle-docs/science/water-level-detection" hreflang="en"><link data-rh="true" rel="alternate" href="https://nconrad.github.io/waggle-docs/science/water-level-detection" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MPDJQF6T11-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/waggle-docs/blog/rss.xml" title="Sage Website RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/waggle-docs/blog/atom.xml" title="Sage Website Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Sage Website" href="/waggle-docs/opensearch.xml"><link rel="stylesheet" href="/waggle-docs/assets/css/styles.5fa025b3.css">
<link rel="preload" href="/waggle-docs/assets/js/runtime~main.f8ebaab7.js" as="script">
<link rel="preload" href="/waggle-docs/assets/js/main.9a52969e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/waggle-docs/"><div class="navbar__logo"><img src="/waggle-docs/img/logo.png" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA custom-navbar-logo-class"><img src="/waggle-docs/img/logo_dark.svg" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU custom-navbar-logo-class"></div><b class="navbar__title text--truncate">Sage</b></a><a class="navbar__item navbar__link" href="/waggle-docs/about">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/waggle-docs/science">Science</a><a class="navbar__item navbar__link" href="/waggle-docs/blog">News</a><a class="navbar__item navbar__link" href="/waggle-docs/publications">Publications</a><a class="navbar__item navbar__link" href="/waggle-docs/team">Team</a><a class="navbar__item navbar__link" href="/waggle-docs/docs/about/overview">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link header-github-link" aria-label="GitHub repository"></a><ul class="dropdown__menu"><li><a href="https://github.com/sagecontinuum" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sage GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/waggle-sensor" target="_blank" rel="noopener noreferrer" class="dropdown__link">Waggle Sensor GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="SignInBtn__Root-sc-1lj79ef-0 fqsrYB"><style data-emotion="css 6ii3fu">.css-6ii3fu{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:5px 15px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border:1px solid rgba(25, 118, 210, 0.5);color:#1976d2;}.css-6ii3fu:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);border:1px solid #1976d2;}@media (hover: none){.css-6ii3fu:hover{background-color:transparent;}}.css-6ii3fu.Mui-disabled{color:rgba(0, 0, 0, 0.26);border:1px solid rgba(0, 0, 0, 0.12);}</style><style data-emotion="css 79xub">.css-79xub{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:5px 15px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border:1px solid rgba(25, 118, 210, 0.5);color:#1976d2;}.css-79xub::-moz-focus-inner{border-style:none;}.css-79xub.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-79xub{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-79xub:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);border:1px solid #1976d2;}@media (hover: none){.css-79xub:hover{background-color:transparent;}}.css-79xub.Mui-disabled{color:rgba(0, 0, 0, 0.26);border:1px solid rgba(0, 0, 0, 0.12);}</style><a class="MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium css-79xub" tabindex="0" href="https://portal.sagecontinuum.org">Portal<style data-emotion="css 1n4a93h">.css-1n4a93h{display:inherit;margin-right:-4px;margin-left:8px;}.css-1n4a93h>*:nth-of-type(1){font-size:20px;}</style><span class="MuiButton-endIcon MuiButton-iconSizeMedium css-1n4a93h"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LoginRoundedIcon"><path d="M10.3 7.7c-.39.39-.39 1.01 0 1.4l1.9 1.9H3c-.55 0-1 .45-1 1s.45 1 1 1h9.2l-1.9 1.9c-.39.39-.39 1.01 0 1.4.39.39 1.01.39 1.4 0l3.59-3.59c.39-.39.39-1.02 0-1.41L11.7 7.7a.9839.9839 0 0 0-1.4 0zM20 19h-7c-.55 0-1 .45-1 1s.45 1 1 1h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-7c-.55 0-1 .45-1 1s.45 1 1 1h7v14z"></path></svg></span></a></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><article><h1>Water Level Detection</h1><p>by Priyanjani Chandra</p><p>Hello!</p><p>My name is Priyanjani Chandra, and I am a graduate student in the Department of Computer Science at Northern Illinois University. As a research intern at Argonne National Laboratory this summer, I worked on a ‘Water Level Detection’ project that employs Computer Vision and Machine Learning based solution to detect the change in the water level of a waterbody. The ultimate goal of this project is to deploy the algorithm on the Array of Things node and detect the water level in real-time.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="importance-of-water-level-detection">Importance of water level detection<a href="#importance-of-water-level-detection" class="hash-link" aria-label="Direct link to Importance of water level detection" title="Direct link to Importance of water level detection">​</a></h2><p>Detecting real-time water level in rivers or creeks located in urban areas is crucial, as floods are being a constant threat to the human community living. Floods cause death, damages crop, and properties. With the rise in global warming, many parts of the world are suffering from recurrent floods and excessive rainfall. Deaths due to flooding are often associated with excessive rainfall, which leads to flash flooding. Due to the devastating nature of floods and flash floods, there is a clear need for constant observation of the water level in the rivers and streams. An adequate solution would be the one that is cost-effective, automated, and requires low maintenance. With the advances in computer vision, machine learning, artificial intelligence, and edge computing there is a necessity of algorithms that can be deployed on low-cost powerful computers at data generation locations. In this project, I leveraged the image of the creek to automatically detect the change in water level in the stream with minimal error. I also correlated my results against the data provided by the United States Geographical Survey (USGS)<sup>[<a href="#references">1</a>]</sup> for the South Kishwaukee River in DeKalb.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-data">About the data<a href="#about-the-data" class="hash-link" aria-label="Direct link to About the data" title="Direct link to About the data">​</a></h2><p><img loading="lazy" alt="sample image" src="/waggle-docs/assets/images/water-level-1-6ce27b19361bdae35130779976acc767.jpg" width="936" height="702" class="img_ev3q"></p><blockquote><p>Figure 1- Sample image taken using the AoT node at Northern Illinois University</p></blockquote><p>The images are collected using the downward-facing camera in the Array of Things (AoT)<sup>[<a href="#references">2</a>]</sup> node installed on a light pole in front of the Computer Science building at Northern Illinois University (NIU).  The AoT node collect images with a resolution of 96dpi at a frequency of every second. There are a total of 2,580,468 images collected every second during October and November 2019. In 2020, the data is collected from June 29, 2020, to date for every second. Figure 1 shows a sample image from the dataset of the collected images.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="approach">Approach<a href="#approach" class="hash-link" aria-label="Direct link to Approach" title="Direct link to Approach">​</a></h2><p><img loading="lazy" alt="water level detection" src="/waggle-docs/assets/images/water-level-2-669ed827c5c6c3285485742da4c6b332.jpg" width="936" height="702" class="img_ev3q"></p><blockquote><p>Figure 2 – Water Level Detection Algorithm</p></blockquote><p>The algorithm’s detailed approach is shown in the flow chart of Figure 2 and described as follows. One image with a clear view at the bottom part of the bridge becomes the reference image. Images collected from the node are initially processed to identify whether it is a day or night image. Further, I employed a template matching algorithm to find the bridge in the image. The template matching algorithm helps to find an object in a new image based on a pre-defined template.  It works best when the template image and new image looks very similar. Since RGB/color image changes drastically under different light and weather conditions, we converted them into grayscale edge-detection images. The edges are extracted by applying the Holistically-Nested Edge Detection (HED)<sup>[<a href="#references">3</a>]</sup> algorithm to the image. A template of the bottom part of the bridge is obtained from the reference image (water level information is pre-determined). This template is further used to find the location of the bridge in the images. By matching the template, the water coordinates are obtained based on the pixel values’ variations within the image. This whole process is applied to the reference image. Linear Regression is applied to the coordinates to obtain the waterline of the template to derive a reference waterline. Waterline for the new images is obtained by utilizing Linear Regression combined with a sliding window concept. The water level change is the difference between the reference water line and the water line detected in the image. Figure 3 shows the images obtained at each step in the algorithm.</p><p><img loading="lazy" alt="water level detection" src="/waggle-docs/assets/images/water-level-3-e92bee452ac4685a206583b49d9c3310.jpg" width="960" height="720" class="img_ev3q"></p><blockquote><p>Figure 3 – The transformation from the original image to the detection of water level change for each stage at the algorithm.</p></blockquote><p>I am applying the algorithm to all the images available at this location and comparing the results to data by the United States Geological Survey<sup>[<a href="#references">1</a>]</sup>.</p><p>Next Steps
The existing algorithm I developed is novel and unsupervised, as it is not relying on any training on the images. I am looking at using Detectron2<sup>[<a href="#references">4</a>]</sup>, an object-detection algorithm, to identify the bottom part of the bridge’s location. The idea is to observe the changes in the location identified by the model.</p><p>I am thankful to my mentors for their constant support. I welcome feedback and comments via LinkedIn.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><ol><li>USGS, “United States Geographical Survey,” <!-- -->[Online]<!-- -->. Available: <a href="https://waterdata.usgs.gov/nwis/uv" target="_blank" rel="noopener noreferrer">https://waterdata.usgs.gov/nwis/uv</a>?. <!-- -->[Accessed 2020]<!-- -->.</li><li>P. Beckman, R. Sankaran, C. Catlett, N. Ferrier, and M. Papka, “Waggle: An open sensor platform for edge computing,” in 2016 IEEE SENSORS, 2016, pp. 1-3.</li><li>S. Xie and Z. Tu, “Holistically-Nested Edge Detection,” in 2015 IEEE International Conference on Computer Vision (ICCV), 2015.</li><li>Y. Wu, A. Kirillov, F. Massa, W. Lo, and R. Girshick, “Github,” Facebook Research, 2019. <!-- -->[Online]<!-- -->. Available: <a href="https://github.com/facebookresearch/detectron2" target="_blank" rel="noopener noreferrer">https://github.com/facebookresearch/detectron2</a>. <!-- -->[Accessed 2020]<!-- -->.</li></ol></article></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#importance-of-water-level-detection" class="table-of-contents__link toc-highlight">Importance of water level detection</a></li><li><a href="#about-the-data" class="table-of-contents__link toc-highlight">About the data</a></li><li><a href="#approach" class="table-of-contents__link toc-highlight">Approach</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></main></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
<script src="/waggle-docs/assets/js/runtime~main.f8ebaab7.js"></script>
<script src="/waggle-docs/assets/js/main.9a52969e.js"></script>
</body>
</html>